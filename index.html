<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MaÄŸaza Denetim Dashboard</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸª MaÄŸaza Denetim Dashboard</h1>
            <p>Executive Analytics & Performance Insights</p>
        </div>

        <div class="tab-navigation">
            <button class="tab-btn active" onclick="switchTab('overview')">ğŸ“Š Genel BakÄ±ÅŸ</button>
            <button class="tab-btn" onclick="switchTab('geography')">ğŸ—ºï¸ CoÄŸrafi Analiz</button>
            <button class="tab-btn" onclick="switchTab('comparison')">âš–ï¸ KarÅŸÄ±laÅŸtÄ±rma</button>
            <button class="tab-btn" onclick="switchTab('statistics')">ğŸ“ˆ Ä°statistikler</button>
            <button class="tab-btn" onclick="switchTab('league')">ğŸ† MaÄŸaza Ligi</button>
            <button class="tab-btn" onclick="switchTab('photos')">ğŸ“· FotoÄŸraf Galerisi</button>
        </div>

        <!-- GENEL BAKIÅ TAB -->
        <div id="overview" class="tab-content active">
            <div class="kpi-grid">
                <div class="kpi-card primary">
                    <div class="kpi-title">Toplam Denetim</div>
                    <div class="kpi-value" id="totalAudits">22</div>
                    <div class="kpi-subtitle">MaÄŸaza denetimi tamamlandÄ±</div>
                </div>
                <div class="kpi-card success">
                    <div class="kpi-title">Ortalama Puan</div>
                    <div class="kpi-value" id="avgScore">85.1</div>
                    <div class="kpi-subtitle">Genel performans ortalamasÄ±</div>
                </div>
                <div class="kpi-card warning">
                    <div class="kpi-title">Ä°yi Durumda</div>
                    <div class="kpi-value" id="goodStores">14</div>
                    <div class="kpi-subtitle">Ä°yi kategorisindeki maÄŸazalar</div>
                </div>
                <div class="kpi-card error">
                    <div class="kpi-title">Dikkat Gereken</div>
                    <div class="kpi-value" id="alertStores">8</div>
                    <div class="kpi-subtitle">Orta ve kÃ¶tÃ¼ durumda</div>
                </div>
            </div>

            <div class="charts-grid">
                <div class="chart-container">
                    <div class="chart-title">En ZayÄ±f Alanlar</div>
                    <canvas id="weakAreasChart"></canvas>
                </div>
                <div class="chart-container">
                    <div class="chart-title">AylÄ±k Trend Analizi</div>
                    <canvas id="trendChart"></canvas>
                </div>
                <div class="chart-container">
                    <div class="chart-title">MaÄŸaza Performans DaÄŸÄ±lÄ±mÄ±</div>
                    <canvas id="performanceChart"></canvas>
                </div>
                <div class="chart-container">
                    <div class="chart-title">En Ä°yi Performans</div>
                    <canvas id="topStoresChart"></canvas>
                </div>
            </div>

            <div class="filter-section">
                <div class="filter-controls">
                    <label><strong>Filtreleme:</strong></label>
                    <select id="monthFilter" onchange="filterAudits()">
                        <option value="">TÃ¼m Aylar</option>
                    </select>
                    <select id="statusFilter" onchange="filterAudits()">
                        <option value="">TÃ¼m Durumlar</option>
                        <option value="Ä°yi">Ä°yi</option>
                        <option value="Orta">Orta</option>
                        <option value="KÃ¶tÃ¼">KÃ¶tÃ¼</option>
                    </select>
                </div>
            </div>

            <div class="analysis-panel" style="margin-bottom: 40px;">
                <div class="panel-header">
                    <div class="panel-title">TÃ¼m Denetimler</div>
                    <div class="panel-count" id="allAuditsCount">22</div>
                </div>
                <div class="store-list" id="allAuditsList" style="max-height: 500px;"></div>
            </div>

            <div class="analysis-grid">
                <div class="analysis-panel">
                    <div class="panel-header">
                        <div class="panel-title">En Ä°yi Performans</div>
                        <div class="panel-count" id="topCount">5</div>
                    </div>
                    <div class="store-list" id="topStores"></div>
                </div>
                <div class="analysis-panel">
                    <div class="panel-header">
                        <div class="panel-title">YÃ¼ksek Risk</div>
                        <div class="panel-count" id="riskCount">6</div>
                    </div>
                    <div class="store-list" id="riskStores"></div>
                </div>
                <div class="analysis-panel">
                    <div class="panel-header">
                        <div class="panel-title">Ä°yileÅŸme Trendi</div>
                        <div class="panel-count" id="improvementCount">0</div>
                    </div>
                    <div class="store-list" id="improvementStores"></div>
                </div>
                <div class="analysis-panel">
                    <div class="panel-header">
                        <div class="panel-title">Kritik Bulgular</div>
                        <div class="panel-count" id="criticalCount">38</div>
                    </div>
                    <div class="store-list" id="criticalFindings"></div>
                </div>
            </div>
        </div>

        <!-- COÄRAFÄ° ANALÄ°Z TAB -->
        <div id="geography" class="tab-content">
            <div class="turkey-map">
                <h2 style="margin-bottom: 20px;">ğŸ—ºï¸ TÃ¼rkiye MaÄŸaza HaritasÄ±</h2>
                <div class="map-container" id="turkeyMap"></div>
            </div>

            <div class="kpi-grid">
                <div class="kpi-card success">
                    <div class="kpi-title">En Ä°yi BÃ¶lge</div>
                    <div class="kpi-value" id="bestRegion">-</div>
                    <div class="kpi-subtitle" id="bestRegionScore">Ortalama puan</div>
                </div>
                <div class="kpi-card error">
                    <div class="kpi-title">En KÃ¶tÃ¼ BÃ¶lge</div>
                    <div class="kpi-value" id="worstRegion">-</div>
                    <div class="kpi-subtitle" id="worstRegionScore">Ortalama puan</div>
                </div>
                <div class="kpi-card primary">
                    <div class="kpi-title">Toplam Åehir</div>
                    <div class="kpi-value" id="totalCities">0</div>
                    <div class="kpi-subtitle">Denetim yapÄ±lan ÅŸehir sayÄ±sÄ±</div>
                </div>
            </div>

            <div class="charts-grid">
                <div class="chart-container">
                    <div class="chart-title">Åehir BazlÄ± Performans</div>
                    <canvas id="cityChart"></canvas>
                </div>
                <div class="chart-container">
                    <div class="chart-title">BÃ¶lge DaÄŸÄ±lÄ±mÄ±</div>
                    <canvas id="regionChart"></canvas>
                </div>
            </div>
        </div>

        <!-- KARÅILAÅTIRMA TAB -->
        <div id="comparison" class="tab-content">
            <div class="filter-section">
                <div class="filter-controls">
                    <label><strong>MaÄŸaza 1:</strong></label>
                    <select id="store1Select">
                        <option value="">MaÄŸaza SeÃ§in</option>
                    </select>
                    <label><strong>MaÄŸaza 2:</strong></label>
                    <select id="store2Select">
                        <option value="">MaÄŸaza SeÃ§in</option>
                    </select>
                    <button class="action-btn" onclick="compareStores()">KarÅŸÄ±laÅŸtÄ±r</button>
                </div>
            </div>

            <div id="comparisonResult"></div>
        </div>

        <!-- Ä°STATÄ°STÄ°KLER TAB -->
        <div id="statistics" class="tab-content">
            <div class="kpi-grid">
                <div class="kpi-card primary">
                    <div class="kpi-title">Standart Sapma</div>
                    <div class="kpi-value" id="stdDev">0</div>
                    <div class="kpi-subtitle">Puan varyansÄ±</div>
                </div>
                <div class="kpi-card success">
                    <div class="kpi-title">Medyan Puan</div>
                    <div class="kpi-value" id="median">0</div>
                    <div class="kpi-subtitle">Ortanca deÄŸer</div>
                </div>
                <div class="kpi-card warning">
                    <div class="kpi-title">Mod Puan</div>
                    <div class="kpi-value" id="mode">0</div>
                    <div class="kpi-subtitle">En sÄ±k gÃ¶rÃ¼len puan</div>
                </div>
                <div class="kpi-card error">
                    <div class="kpi-title">AykÄ±rÄ± DeÄŸerler</div>
                    <div class="kpi-value" id="outliers">0</div>
                    <div class="kpi-subtitle">Outlier sayÄ±sÄ±</div>
                </div>
            </div>

            <div class="charts-grid">
                <div class="chart-container">
                    <div class="chart-title">Puan DaÄŸÄ±lÄ±mÄ± (Histogram)</div>
                    <canvas id="histogramChart"></canvas>
                </div>
                <div class="chart-container">
                    <div class="chart-title">Box Plot Analizi</div>
                    <canvas id="boxPlotChart"></canvas>
                </div>
            </div>
        </div>

        <!-- MAÄAZA LÄ°GÄ° TAB -->
        <div id="league" class="tab-content">
            <div class="analysis-panel">
                <h2 style="margin-bottom: 20px;">ğŸ† MaÄŸaza Performans Ligi</h2>
                <table class="league-table" id="leagueTable">
                    <thead>
                        <tr>
                            <th>SÄ±ra</th>
                            <th>MaÄŸaza</th>
                            <th>Puan</th>
                            <th>Rozetler</th>
                            <th>Durum</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>

        <!-- FOTOÄRAF GALERÄ°SÄ° TAB -->
        <div id="photos" class="tab-content">
            <div class="analysis-panel">
                <h2 style="margin-bottom: 20px;">ğŸ“· Denetim FotoÄŸraflarÄ±</h2>
                <div class="filter-controls" style="margin-bottom: 20px;">
                    <label><strong>MaÄŸaza:</strong></label>
                    <select id="photoStoreFilter" onchange="filterPhotos()">
                        <option value="">TÃ¼m MaÄŸazalar</option>
                    </select>
                    <input type="file" id="photoUpload" accept="image/*" multiple style="display: none;">
                    <button class="action-btn" onclick="document.getElementById('photoUpload').click()">ğŸ“· FotoÄŸraf Ekle</button>
                </div>
                <div class="photo-gallery" id="photoGallery">
                    <div class="photo-item" style="display: flex; align-items: center; justify-content: center; color: #8E8E93;">
                        <p>HenÃ¼z fotoÄŸraf eklenmedi</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="upload-section">
        <div style="font-weight: 600; margin-bottom: 12px;">Excel Veri YÃ¼kleme</div>
        <input type="file" id="fileInput" accept=".xlsx,.xls" style="display: none;">
        <div>
            <button class="upload-btn" onclick="document.getElementById('fileInput').click()">Dosya SeÃ§</button>
            <button class="upload-btn" onclick="loadExcelData()">YÃ¼kle</button>
        </div>
        <div id="uploadStatus" style="color: #666;">Excel dosyanÄ±zÄ± seÃ§in</div>
    </div>

    <div id="storeModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">Ã—</span>
            <h2 id="modalTitle">MaÄŸaza DetaylarÄ±</h2>
            <div id="modalContent">Ä°Ã§erik yÃ¼kleniyor...</div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>